# Ticket AT-001: Policy-as-Code Sync

## Context
- **Ziel / Nutzen:**  
  Architektur (v1.8), Horizon Map (v1.8) und Business Case (v1.8) sollen dieselben sieben Policies (Energy, Quality, Automation, Market Validation, Profit per Hour, Harmony Check, Ledger Freeze Gate) konsistent referenzieren und im Ledger synchron halten.  
  Ziel ist, dass jede Policy eine eindeutige Quelle, einen aktiven Status und einen Nachweis im Ledger hat.  

- **Referenzen:**  
  - `meta/AI_First_System_Architecture_v1.8.md`  
  - `meta/Horizon_Map_v1.8.md`  
  - `docs/BUSINESS_CASE_Horizon_v1.8.md`  
  - `artefacts/sync/System_Harmony_Ledger.md`

---

## Outcome Target (1–2 Sätze & KPI)
- **Ergebnis:**  
  Ein automatischer Sync-Lauf stellt sicher, dass alle 7 Policies in Architektur, Horizon Map und Ledger vorhanden, aktiv und verlinkt sind.  
- **KPI / Messpunkte:**  
  - Policy Valid % ≥ 95 %  
  - Drift ≤ 5 %  
  - 0 fehlende Policy-IDs im Ledger

---

## Definition of Ready (DoR)
- [x] Scope & betroffene Dateien klar (Architecture / Horizon / Business / Ledger)  
- [x] Kanonische Policy-Liste (7) bestätigt  
- [x] Akzeptanzkriterien & KPIs final  
- [ ] CI-Schritte definiert (Check + Fix)  
- [ ] Owner & Zeitrahmen gesetzt  

---

## Definition of Done (DoD)
- [ ] Script `scripts/policy_sync.mjs` existiert (Check + Fix + Report)  
- [ ] CI-Step integriert (nicht optional)  
- [ ] Ledger aktualisiert (Policy Valid %, Verlinkungen)  
- [ ] Diagnose & Freeze-Gate grün  
- [ ] Lessons dokumentiert  

---

## Plan (≤ 5 Schritte)
1. Policy-Kanon laden (7 Policies) und Soll-Zustand bilden.  
2. Check: in Architecture / Horizon / Business / Ledger Policy-IDs & Status prüfen.  
3. Fix: fehlende Policy-Blöcke ergänzen / Status „active“ setzen (idempotent).  
4. Report schreiben: `artefacts/logs/policy_sync_report.md` + `.json`.  
5. CI integrieren (Freeze-Validator) → Fail bei Policy Valid < 95 %.

---

## Proof of Learning & Value
- **Hypothese:** Ein automatischer Policy-Sync reduziert Drift und erhöht den System Harmony Score.  
- **Evidenz (Dateien / Logs):** `policy_sync_report.*`, `deep_diagnose_report.md`, CI-Run „Freeze · Validator (v1.8)“.  
- **Ergebnis:** _TBD nach erster Ausführung_  
- **Impact (kurz):** _TBD nach Validierung_  

---

## Policy References
- POL:Quality  
- POL:Automation  
- POL:Harmony  

---

## Risks
- Fehlende Schreibrechte in Kern-Dateien → nur idempotente Patches zulassen.  
- Fehlerhafte Regex kann Policies doppelt einfügen → Backup .erstellen.  

---

## Transitions
- 2025-10-17: Rebrief erstellt – AT-001 → ready  
